{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap dba106f04e000c81b825","webpack:///external \"react\"","webpack:///./src/components/GherkinEditor/modules/keyword-completer/index.js","webpack:///./src/components/GherkinEditor/modules/step-completer/index.js","webpack:///./src/components/GherkinEditor/index.js","webpack:///external \"prop-types\"","webpack:///./src/components/GherkinEditor/themes/jira.js","webpack:///external \"brace/mode/gherkin\""],"names":["keywords","highLevelkeywords","lineTokens","session","position","completions","meta","callback","error","strings","longestString","width","editor","fontSize","value","initialValue","onValueChange","keywordCompleter","stepCompleter","langTools","nextProps","prevState","onChange","uniqueId","autoCompleteFunction","func","Math","Promise","theme","setOptions","fontFamily","tabSize","ace","exports","dom","acequire"],"mappings":"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","file":"GherkinEditor.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"GherkinEditor\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"GherkinEditor\"] = factory();\n\telse\n\t\troot[\"GherkinEditor\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dba106f04e000c81b825","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 0\n// module chunks = 0","// TODO: Should handle I18n\nexport const highLevelkeywords = [\n  'Feature',\n  'Background',\n  'Example',\n  'Scenario',\n  'Scenario Outline',\n  'Scenario Template',\n  'Examples'\n]\n\nexport const stepLevelKeywords = ['Given', 'When', 'Then', 'And', 'But']\n\nexport const keywords = highLevelkeywords.concat(stepLevelKeywords)\n\nclass KeywordCompleter {\n  getCompletions = async (_editor, session, position, _prefix, callback) => {\n    const lineTokens = session\n      .getLine(position.row)\n      .trim()\n      .split(' ')\n\n    if (lineTokens.length === 1) {\n      const completions = keywords.map((keyword, index) => ({\n        caption: keyword,\n        value: keyword,\n        score: index,\n        meta: 'Keyword'\n      }))\n      callback(null, completions)\n    }\n  }\n}\n\nexport default KeywordCompleter\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/GherkinEditor/modules/keyword-completer/index.js","import _ from 'lodash'\nimport calculateSize from 'calculate-size'\nimport { stepLevelKeywords } from '../keyword-completer'\n\nclass StepCompleter {\n  constructor (autoCompleteFunction) {\n    this.autoCompleteFunction = autoCompleteFunction\n  }\n\n  getCompletions = async (editor, session, position, _prefix, callback) => {\n    const lineTokens = session\n      .getLine(position.row)\n      .trim()\n      .split(' ')\n\n    if (lineTokens.length > 1 && stepLevelKeywords.includes(lineTokens[0])) {\n      const keyword = lineTokens.shift()\n      const text = lineTokens.join(' ')\n      try {\n        const completions = await this.autoCompleteFunction(keyword, text)\n        callback(null, completions)\n        this._resizePopup(editor, completions)\n      } catch (error) {\n        callback(null, [])\n        throw error\n      }\n    }\n  }\n\n  _resizePopup = (editor, completions) => {\n    if (_.isEmpty(completions)) {\n      return\n    }\n\n    const strings = _.map(completions, 'caption')\n    const longestString = _.orderBy(strings, 'length', 'desc').shift()\n    const width = this._calculateVisualLength(editor, longestString)\n    editor.completer.popup.container.style.width = `${width + 50}px`\n  }\n\n  _calculateVisualLength = (editor, string) => {\n    const { fontFamily, fontSize } = editor.getOptions()\n    const { width } = calculateSize(string, {\n      font: fontFamily,\n      fontSize: fontSize\n    })\n    return width\n  }\n}\n\nexport default StepCompleter\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/GherkinEditor/modules/step-completer/index.js","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport AceEditor from 'react-ace'\nimport Brace from 'brace'\nimport KeywordCompleter from './modules/keyword-completer'\nimport StepCompleter from './modules/step-completer'\nimport './themes/jira'\nimport 'brace/mode/gherkin'\nimport 'brace/ext/language_tools'\n\nclass GherkinEditor extends Component {\n  static propTypes = {\n    initialValue: PropTypes.string,\n    uniqueId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    onValueChange: PropTypes.func,\n    autoCompleteFunction: PropTypes.func\n  }\n\n  static defaultProps = {\n    initialValue: '',\n    uniqueId: Math.random()\n      .toString(36)\n      .substr(2, 9),\n    onValueChange: () => {},\n    autoCompleteFunction: () => Promise.resolve([]),\n    theme: 'jira',\n    width: '100%',\n    fontSize: 14,\n    showPrintMargin: false,\n    showGutter: true,\n    highlightActiveLine: true,\n    setOptions: {\n      fontFamily: `'SFMono-Medium', 'SF Mono', 'Segoe UI Mono', 'Roboto Mono', 'Ubuntu Mono', Menlo, Consolas, Courier, monospace`,\n      enableBasicAutocompletion: true,\n      enableLiveAutocompletion: true,\n      showLineNumbers: true,\n      displayIndentGuides: true,\n      tabSize: 2\n    }\n  }\n\n  state = {\n    value: this.props.initialValue\n  }\n\n  constructor (props) {\n    super(props)\n    this.AceEditorRef = null\n  }\n\n  get ace () {\n    return this.AceEditorRef.editor\n  }\n\n  setAceEditorRef = aceEditor => {\n    this.AceEditorRef = aceEditor\n  }\n\n  componentDidMount () {\n    const { autoCompleteFunction } = this.props\n    const keywordCompleter = new KeywordCompleter()\n    const stepCompleter = new StepCompleter(autoCompleteFunction)\n    const langTools = Brace.acequire('ace/ext/language_tools')\n    langTools.setCompleters([keywordCompleter, stepCompleter])\n  }\n\n  componentWillReceiveProps (nextProps, prevState) {\n    if (nextProps.initialValue !== prevState.value) {\n      this.setState({ value: nextProps.initialValue })\n    }\n  }\n\n  onChange = newValue => {\n    this.setState({ value: newValue })\n    const { onValueChange } = this.props\n    const { value } = this.state\n    onValueChange(value)\n  }\n\n  render () {\n    const { uniqueId } = this.props\n    const { value } = this.state\n    return (\n      <AceEditor\n        {...this.props}\n        ref={this.setAceEditorRef}\n        mode='gherkin'\n        value={value}\n        name={uniqueId}\n        editorProps={{ $blockScrolling: true }}\n        onChange={this.onChange}\n      />\n    )\n  }\n}\n\nexport default GherkinEditor\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/GherkinEditor/index.js","module.exports = require(\"prop-types\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"prop-types\"\n// module id = 3\n// module chunks = 0","/* istanbul ignore file */\n/* eslint-disable */\nace.define(\n  'ace/theme/jira',\n  ['require', 'exports', 'module', 'ace/lib/dom'],\n  function(acequire, exports, module) {\n    'use strict'\n\n    exports.isDark = false\n    exports.cssClass = 'ace-jira'\n    exports.cssText = `ace_editor {\n  margin: auto;\n  width: 100%;\n}\n.ace-jira .ace_gutter {\n  background: rgb(235, 236, 240);\n  color: rgb(137, 147, 164);\n}\n\n.ace-jira .ace_print-margin {\n  width: 1px;\n  background: #e8e8e8;\n}\n\n.ace-jira .ace_fold {\n  background-color: #6B72E6;\n}\n\n.ace-jira {\n  background: rgb(244, 245, 247);\n  color: rgb(23, 43, 77);\n}\n\n.ace-jira .ace_cursor {\n  color: black;\n}\n\n.ace-jira .ace_invisible {\n  color: rgb(191, 191, 191);\n}\n\n.ace-jira .ace_storage, .ace-jira .ace_keyword {\n  color: rgb(0, 82, 204);\n  font-weight: bolder;\n}\n\n.ace-jira .ace_constant {\n  color: rgb(197, 6, 11);\n}\n\n.ace-jira .ace_constant.ace_buildin {\n  color: rgb(88, 72, 246);\n}\n\n.ace-jira .ace_constant.ace_language {\n  color: rgb(88, 92, 246);\n}\n\n.ace-jira .ace_constant.ace_library {\n  color: rgb(6, 150, 14);\n}\n\n.ace-jira .ace_invalid {\n  background-color: rgba(255, 0, 0, 0.1);\n  color: red;\n}\n\n.ace-jira .ace_support.ace_function {\n  color: rgb(60, 76, 114);\n}\n\n.ace-jira .ace_support.ace_constant {\n  color: rgb(6, 150, 14);\n}\n\n.ace-jira .ace_support.ace_type,\n  .ace-jira .ace_support.ace_class {\n  color: rgb(109, 121, 222);\n}\n\n.ace-jira .ace_keyword.ace_operator {\n  color: rgb(104, 118, 135);\n}\n\n.ace-jira .ace_string {\n  color: rgb(54, 179, 126);\n}\n\n.ace-jira .ace_comment {\n  color: rgb(80, 95, 121);\n}\n\n.ace-jira .ace_comment.ace_doc {\n  color: rgb(0, 102, 255);\n}\n\n.ace-jira .ace_comment.ace_doc.ace_tag {\n  color: rgb(128, 159, 191);\n}\n\n.ace-jira .ace_constant.ace_numeric {\n  color: rgb(0, 0, 205);\n}\n\n.ace-jira .ace_variable {\n  color: rgb(49, 132, 149);\n}\n\n.ace-jira .ace_xml-pe {\n  color: rgb(104, 104, 91);\n}\n\n.ace-jira .ace_entity.ace_name.ace_function {\n  color: #0000A2;\n}\n\n.ace-jira .ace_heading {\n  color: rgb(12, 7, 255);\n}\n\n.ace-jira .ace_list {\n  color: rgb(185, 6, 144);\n}\n\n.ace-jira .ace_meta.ace_tag {\n  color: rgb(0, 22, 142);\n}\n\n.ace-jira .ace_string.ace_regex {\n  color: rgb(255, 0, 0);\n}\n\n.ace-jira .ace_marker-layer .ace_selection {\n  background: rgb(181, 213, 255);\n}\n\n.ace-jira.ace_multiselect .ace_selection.ace_start {\n  box-shadow: 0 0 3px 0px white;\n}\n\n.ace-jira .ace_marker-layer .ace_step {\n  background: rgb(252, 255, 0);\n}\n\n.ace-jira .ace_marker-layer .ace_stack {\n  background: rgb(164, 229, 101);\n}\n\n.ace-jira .ace_marker-layer .ace_bracket {\n  margin: -1px 0 0 -1px;\n  border: 1px solid rgb(192, 192, 192);\n}\n\n.ace-jira .ace_marker-layer .ace_active-line {\n  background: rgba(0, 0, 0, 0.07);\n}\n\n.ace-jira .ace_gutter-active-line {\n  background-color: #dcdcdc;\n}\n\n.ace-jira .ace_marker-layer .ace_selected-word {\n  background: rgb(250, 250, 255);\n  border: 1px solid rgb(200, 200, 250);\n}\n\n.ace-jira .ace_indent-guide {\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\") right repeat-y;\n}`\n\n    var dom = acequire('../lib/dom')\n    dom.importCssString(exports.cssText, exports.cssClass)\n  }\n)\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/GherkinEditor/themes/jira.js","module.exports = require(\"brace/mode/gherkin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"brace/mode/gherkin\"\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}